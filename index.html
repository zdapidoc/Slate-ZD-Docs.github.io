
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-240803ee.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-6043ed66.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#environments" class="toc-h1 toc-link" data-title="Environments">Environments</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#token-header" class="toc-h2 toc-link" data-title="Token Header">Token Header</a>
                  </li>
                  <li>
                    <a href="#token-generation" class="toc-h2 toc-link" data-title="Token generation">Token generation</a>
                  </li>
                  <li>
                    <a href="#example" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#create-disputes" class="toc-h1 toc-link" data-title="Create Disputes">Create Disputes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-2" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#payload-object-description" class="toc-h2 toc-link" data-title="Payload Object Description">Payload Object Description</a>
                  </li>
                  <li>
                    <a href="#object-schemas" class="toc-h2 toc-link" data-title="Object Schemas">Object Schemas</a>
                  </li>
                  <li>
                    <a href="#example-2" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
                  <li>
                    <a href="#error-messages" class="toc-h2 toc-link" data-title="Error messages">Error messages</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-3" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#headers" class="toc-h2 toc-link" data-title="Headers">Headers</a>
                  </li>
                  <li>
                    <a href="#verifying-the-source" class="toc-h2 toc-link" data-title="Verifying the source">Verifying the source</a>
                  </li>
                  <li>
                    <a href="#dispute-status-update" class="toc-h2 toc-link" data-title="Dispute Status update">Dispute Status update</a>
                  </li>
                  <li>
                    <a href="#adjudication-results" class="toc-h2 toc-link" data-title="Adjudication Results">Adjudication Results</a>
                  </li>
                  <li>
                    <a href="#on-demand-webhook-triggering-staging-only" class="toc-h2 toc-link" data-title="On-demand webhook triggering (Staging only)">On-demand webhook triggering (Staging only)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#contacts" class="toc-h1 toc-link" data-title="Contacts">Contacts</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>This is the official public documentation for The Dispute Service Disputes API.</p>

<p>TDS exposes a REST based API that allows 3rd party companies to use their dispute management service by submitting 
dispute related data that will then be managed by the adjudication team. </p>

<p>The adjudication results will then be passed over to the dispute requester via Webhook to the provided endpoint.</p>

<p>TDS can also send regular dispute status updates via Webhook if the requester is able to provide an endpoint for it.</p>
<h1 id='environments'>Environments</h1>
<p>TDS will expose a staging environment, that suppliers can use to test their integration end-to-end and create test data, and the production
environment where the live version of the API is hosted and live data is flowing.</p>

<table><thead>
<tr>
<th>Enviromnent</th>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td>Production</td>
<td>TBC</td>
</tr>
<tr>
<td>Staging</td>
<td>https://uat-tds.cs87.force.com/services/apexrest/v1/disputes</td>
</tr>
</tbody></table>
<h1 id='authentication'>Authentication</h1>
<p>In order to submit disputes via the API, clients will need to pass a token with every request. For every new client that
requests access, a new API account will be set up and TDS will provide a set of credentials.</p>

<p>These credentials will include:</p>

<p><code>Account ID</code> - identifies the supplier account and it is the same across all environments</p>

<p><code>client_id</code> - unique identifier for the application, should be different across environments</p>

<p><code>client_secret</code> - key used to sign the token hash, should also different across environments</p>

<p>For every environment that TDS exposes the API(production or sandboxes), although the Account ID will be the same, a
different set of client credentials will be provided.</p>

<aside class="notice">
Account ID and client credentials will be provided by TDS on request.
</aside>
<h2 id='token-header'>Token Header</h2>
<p>Your token will be passed in the <code>Token</code> HTTP Header and should have the following format:</p>

<p><code>&lt;account_ID&gt;-&lt;timestamp&gt;-&lt;hmac&gt;</code> </p>

<p><code>account_ID</code> - used to track the supplier account ID</p>

<p><code>timestamp</code> - milliseconds since Unix Epoch time; any timestamp within a 5 minute window(between 
client request and the moment that the API processes the request) will be accepted, to cover for a potential
delay between systems</p>

<p><code>hmac</code> - this will be a computed hash of a string containing the client credentials and the timestamp parameters</p>
<h2 id='token-generation'>Token generation</h2><h3 id='step-1-generating-the-url-parameter-string'>Step 1 - generating the url parameter string</h3>
<p>Use your client credentials and Unix time to generate a url-param string like below</p>

<p><code>client_id=&lt;your_client_id&gt;&amp;client_secret=&lt;your_client_secret&gt;&amp;timestamp=&lt;current_unix_time&gt;</code></p>

<aside class="warning">
Remember, the timestamp should be sent in milliseconds.
</aside>
<h3 id='step-2-hashing'>Step 2 - hashing</h3>
<p>Use SHA1 algorithm to generate a HMAC of the url string using your <code>client_secret</code> as the private key.</p>
<h3 id='step-3-map-it-to-token-header'>Step 3 - map it to Token header</h3>
<p>Concatenate your account ID, timestamp and HMAC in a string like below</p>

<p>Finally, use the outputs generated above to form your token like below</p>

<p><code>&lt;account_ID&gt;-&lt;timestamp&gt;-&lt;hmac&gt;</code></p>

<p>And map it to your <code>Token</code> HTTP Header in your HTTP Request.</p>

<table><thead>
<tr>
<th>HTTP Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Token</td>
<td><code>&lt;account_ID&gt;-&lt;timestamp&gt;-&lt;hmac&gt;</code></td>
</tr>
</tbody></table>

<p>Field marked with &lt; &gt; should be replaced with the correct outputs.</p>
<h2 id='example'>Example</h2>
<p>Below is an example of token generation.</p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>supplierX</td>
</tr>
<tr>
<td>client_id</td>
<td>iy8oiyuy809piohSd</td>
</tr>
<tr>
<td>client_secret</td>
<td>2e9ifb809!s23e723028ffLL</td>
</tr>
<tr>
<td>timestamp</td>
<td>1576769124000</td>
</tr>
</tbody></table>
<h3 id='step-1'>Step 1</h3>
<p>This will result in the string below:</p>

<p><code>client_id=iy8oiyuy809piohSd&amp;client_secret=2e9ifb809!s23e723028ffLL&amp;timestamp=1576769124000</code></p>
<h3 id='step-2'>Step 2</h3>
<p>The SHA1 digest using the client_secret as private key should be:</p>

<p><code>b4072b847c5c3658e3f293267363c9c545fa034c</code></p>
<h3 id='step-3'>Step 3</h3>
<p>HTTP Token header will then look like:</p>

<p><code>Token</code>:<code>supplierX-1576769124000-b4072b847c5c3658e3f293267363c9c545fa034c</code></p>

<aside class="notice">
Providing a Token that has a wrong account_id, a timestamp that is not unix time or doesn't fall within a 5 minute 
window delay, or an invalid hmac will result in an unauthorized API call and therefore will be rejected.
</aside>
<h1 id='create-disputes'>Create Disputes</h1><h2 id='introduction-2'>Introduction</h2>
<p>Dispute data submission should be done via JSON payload and will include dispute related context.
Parameter names and field types should comply to the schema provided for the endpoint.</p>

<p>A strict level of validation will be performed on the payload, to check value integrity and ensuring that mandatory 
information is being provided correctly and within the allowed value sets when those apply.</p>

<p>Any attempt to send duplicate dispute, dispute_line, tenancy or evidence objects will cause the payload to be rejected.</p>
<h2 id='payload-object-description'>Payload Object Description</h2>
<p>The payload should be a JSON object contain the key parameters described below.</p>

<table><thead>
<tr>
<th>Key Name</th>
<th>Mandatory</th>
<th>Object Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent</td>
<td>No</td>
<td>Object</td>
<td>Agent related to the dispute</td>
</tr>
<tr>
<td>branch</td>
<td>No</td>
<td>Object</td>
<td>Agency branch of the agent related to dispute</td>
</tr>
<tr>
<td>tenant</td>
<td>Yes</td>
<td>Array of Objects</td>
<td>List of tenants related to dispute</td>
</tr>
<tr>
<td>landlord</td>
<td>Yes</td>
<td>Object</td>
<td>Landlord related to dispute</td>
</tr>
<tr>
<td>tenancy</td>
<td>Yes</td>
<td>Object</td>
<td>Related Tenancy information such as address and start dates</td>
</tr>
<tr>
<td>dispute</td>
<td>Yes</td>
<td>Object</td>
<td>Dispute information</td>
</tr>
<tr>
<td>dispute_line</td>
<td>Yes</td>
<td>Array of Objects</td>
<td>List of claim types and amounts for dispute</td>
</tr>
<tr>
<td>evidence</td>
<td>Yes</td>
<td>Array of Objects</td>
<td>List of evidence information such as file names and resource url</td>
</tr>
</tbody></table>
<h2 id='object-schemas'>Object Schemas</h2>
<p>Below are the schemas for the objects described above.</p>
<h3 id='agent'>agent</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>branch_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>agent&#39;s branch unique identifier</td>
</tr>
<tr>
<td>firstname</td>
<td>String(40)</td>
<td>-</td>
<td>Yes</td>
<td>first name</td>
</tr>
<tr>
<td>lastname</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>surname</td>
</tr>
<tr>
<td>phone</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>land line number</td>
</tr>
<tr>
<td>mobile</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>mobile phone number</td>
</tr>
<tr>
<td>email</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>email address</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date(YYYY-MM-DD)</td>
<td>-</td>
<td>No</td>
<td>birth date</td>
</tr>
<tr>
<td>salutation</td>
<td>Enum(10)</td>
<td>Mr., Ms., Mrs., Dr., Prof., Mx.</td>
<td>No</td>
<td>salutation</td>
</tr>
<tr>
<td>job_title</td>
<td>String(128)</td>
<td>-</td>
<td>No</td>
<td>job title</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='branch'>branch</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>name</td>
<td>String(255)</td>
<td>-</td>
<td>Yes</td>
<td>agencie&#39;s branch name</td>
</tr>
<tr>
<td>phone</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>landline number</td>
</tr>
<tr>
<td>postcode</td>
<td>String(20)</td>
<td>-</td>
<td>No</td>
<td>address post code</td>
</tr>
<tr>
<td>street</td>
<td>String(255)</td>
<td>-</td>
<td>No</td>
<td>address street name</td>
</tr>
<tr>
<td>city</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>city name</td>
</tr>
<tr>
<td>country</td>
<td>String(80)</td>
<td>-</td>
<td>No</td>
<td>country name</td>
</tr>
<tr>
<td>website</td>
<td>String(255)</td>
<td>-</td>
<td>No</td>
<td>website</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='tenant'>tenant</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>firstname</td>
<td>String(40)</td>
<td>-</td>
<td>Yes</td>
<td>first name</td>
</tr>
<tr>
<td>lastname</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>surname</td>
</tr>
<tr>
<td>phone</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>land line number</td>
</tr>
<tr>
<td>mobile</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>mobile phone number</td>
</tr>
<tr>
<td>email</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>email address</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date(YYYY-MM-DD)</td>
<td>-</td>
<td>No</td>
<td>birth date</td>
</tr>
<tr>
<td>salutation</td>
<td>Enum(10)</td>
<td>Mr., Ms., Mrs., Dr., Prof., Mx.</td>
<td>No</td>
<td>salutation</td>
</tr>
<tr>
<td>job_title</td>
<td>String(128)</td>
<td>-</td>
<td>No</td>
<td>job title</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='landlord'>landlord</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>firstname</td>
<td>String(40)</td>
<td>-</td>
<td>Yes</td>
<td>first name</td>
</tr>
<tr>
<td>lastname</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>surname</td>
</tr>
<tr>
<td>phone</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>land line number</td>
</tr>
<tr>
<td>mobile</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>mobile phone number</td>
</tr>
<tr>
<td>email</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>email address</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date(YYYY-MM-DD)</td>
<td>-</td>
<td>No</td>
<td>birth date</td>
</tr>
<tr>
<td>salutation</td>
<td>Enum(10)</td>
<td>Mr., Ms., Mrs., Dr., Prof., Mx.</td>
<td>No</td>
<td>salutation</td>
</tr>
<tr>
<td>job_title</td>
<td>String(128)</td>
<td>-</td>
<td>No</td>
<td>job title</td>
</tr>
<tr>
<td>postcode</td>
<td>String(20)</td>
<td>-</td>
<td>No</td>
<td>address post code</td>
</tr>
<tr>
<td>street</td>
<td>String(255)</td>
<td>-</td>
<td>No</td>
<td>address street name</td>
</tr>
<tr>
<td>city</td>
<td>String(40)</td>
<td>-</td>
<td>No</td>
<td>city name</td>
</tr>
<tr>
<td>country</td>
<td>String(80)</td>
<td>-</td>
<td>No</td>
<td>country name</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='tenancy'>tenancy</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>postcode</td>
<td>String(20)</td>
<td>-</td>
<td>Yes</td>
<td>address post code</td>
</tr>
<tr>
<td>street</td>
<td>String(255)</td>
<td>-</td>
<td>Yes</td>
<td>address street name</td>
</tr>
<tr>
<td>city</td>
<td>String(40)</td>
<td>-</td>
<td>Yes</td>
<td>city name</td>
</tr>
<tr>
<td>country</td>
<td>String(80)</td>
<td>-</td>
<td>Yes</td>
<td>country name</td>
</tr>
<tr>
<td>start_date</td>
<td>Date(YYYY-MM-DD)</td>
<td>-</td>
<td>Yes</td>
<td>start date of tenancy as per tenancy agreement</td>
</tr>
<tr>
<td>end_date</td>
<td>Date(YYYY-MM-DD)</td>
<td>-</td>
<td>Yes</td>
<td>expected end date of tenancy as per the tenancy agreement</td>
</tr>
<tr>
<td>deposit_amount</td>
<td>Double(16,2)</td>
<td>-</td>
<td>Yes</td>
<td>total value of the deposit</td>
</tr>
<tr>
<td>rent_amount</td>
<td>Double(16,2)</td>
<td>-</td>
<td>No</td>
<td>rent amount payable as per the tenancy agreement.</td>
</tr>
<tr>
<td>nr_of_tenants</td>
<td>Integer(3)</td>
<td>-</td>
<td>No</td>
<td>total number of tenants allocated to the tenancy</td>
</tr>
<tr>
<td>reference</td>
<td>String(255)</td>
<td>-</td>
<td>Yes</td>
<td>reference for tenancy, policy or deposit</td>
</tr>
<tr>
<td>customer_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique id of Landlord or Branch that paid the deposit, police or fee</td>
</tr>
<tr>
<td>customer_type</td>
<td>Enum(255)</td>
<td>Landlord, Branch</td>
<td>Yes</td>
<td>specifies the customer type, Branch or Landlord</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='dispute'>dispute</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>tenancy_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique id of the dispute&#39;s related tenancy</td>
</tr>
<tr>
<td>disputed_amount</td>
<td>Double(16,2)</td>
<td>-</td>
<td>Yes</td>
<td>the amount in dispute</td>
</tr>
<tr>
<td>deposit_owner_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>the id of the deposit owner or beneficiary (landlord or branch)</td>
</tr>
<tr>
<td>agent_id</td>
<td>String(244)</td>
<td>-</td>
<td>No</td>
<td>unique id of the agent involved to the dispute</td>
</tr>
<tr>
<td>branch_id</td>
<td>String(244)</td>
<td>-</td>
<td>No</td>
<td>id of the agent&#39;s branch involved in the dispute</td>
</tr>
<tr>
<td>initiated_by</td>
<td>Enum(255)</td>
<td>Agent, Landlord, Tenant</td>
<td>Yes</td>
<td>the party that raised the dispute</td>
</tr>
<tr>
<td>dispute_steps</td>
<td>String(32768)</td>
<td>-</td>
<td>No</td>
<td>steps taken to resolve dispute pior to raising it with TDS</td>
</tr>
<tr>
<td>dispute_reasons</td>
<td>String(32768)</td>
<td>-</td>
<td>No</td>
<td>summary of reasons for the dispute</td>
</tr>
<tr>
<td>lead_landlord_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>id for landlord involved in the dispute</td>
</tr>
<tr>
<td>lead_tenant_id</td>
<td>String(244)</td>
<td>-</td>
<td>No</td>
<td>id for the main tenant involved in dispute</td>
</tr>
<tr>
<td>total_claim_amount</td>
<td>Double(16,2)</td>
<td>-</td>
<td>Yes</td>
<td>the total amount claimed from the deposit, including both agreed and disputed deductions</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='dispute_line'>dispute_line</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>dispute_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique id of parent dispute</td>
</tr>
<tr>
<td>type</td>
<td>Enum(255)</td>
<td>Cleaning, Damage, Redecoration, Gardening, Rent, Arrears, Other</td>
<td>Yes</td>
<td>type of claim</td>
</tr>
<tr>
<td>tenant_amount_agreed</td>
<td>Double(16,2)</td>
<td>-</td>
<td>No</td>
<td>amount the tenant agrees to be paid to the landlord</td>
</tr>
<tr>
<td>claimed_landlord</td>
<td>Double(16,2)</td>
<td>-</td>
<td>Yes</td>
<td>amount claimed by Landlord</td>
</tr>
<tr>
<td>landlord_statement</td>
<td>String(32768)</td>
<td>-</td>
<td>No</td>
<td>landlord&#39;s justification for the claim</td>
</tr>
<tr>
<td>tenant_statement</td>
<td>String(32768)</td>
<td>-</td>
<td>No</td>
<td>tenant&#39;s justification for disputing the landlord&#39;s claim</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>
<h3 id='evidence'>evidence</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Field Type</th>
<th>Value Set</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique identifier</td>
</tr>
<tr>
<td>dispute_id</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>unique id of parent dispute</td>
</tr>
<tr>
<td>dispute_item_id</td>
<td>String(244)</td>
<td>-</td>
<td>No</td>
<td>unique id of related dispute line</td>
</tr>
<tr>
<td>filename</td>
<td>String(244)</td>
<td>-</td>
<td>Yes</td>
<td>name of the file that has been uploaded</td>
</tr>
<tr>
<td>file_size</td>
<td>Integer(10)</td>
<td>-</td>
<td>No</td>
<td>size of the file in bytes</td>
</tr>
<tr>
<td>file_type</td>
<td>Enum(10)</td>
<td>See below</td>
<td>Yes</td>
<td>format of the file</td>
</tr>
<tr>
<td>file_url</td>
<td>String(255)</td>
<td>-</td>
<td>Yes</td>
<td>link including resource path in storage server</td>
</tr>
<tr>
<td>source</td>
<td>Enum(255)</td>
<td>Dispute Application, Dispute Response, Admin</td>
<td>No</td>
<td>mechanism through which the evidence was uploaded</td>
</tr>
<tr>
<td>uploader_type</td>
<td>Enum(255)</td>
<td>Agent, Landlord, Tenant</td>
<td>Yes</td>
<td>type of user who uploaded the evidence during the dispute process</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time(YYYY-MM-DDTHH:mm:ssZ)</td>
<td>-</td>
<td>Yes</td>
<td>resource creation date and time</td>
</tr>
</tbody></table>

<aside class="notice">
File type can be pdf,doc,docx,txt,rtf,odt,xls,xlsx,ods,png,jpeg,jpg,gif,tiff,tif,bmp,emf,mpg,mpe,avi,mp3,mp4,wmv,wav,
csv,eml,msg
</aside>
<h2 id='example-2'>Example</h2><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s1">'https://uat-tds.cs87.force.com/services/apexrest/v1/disputes'</span> 
-H <span class="s1">'Accept: application/json'</span>
-H <span class="s1">'Content-Type: application/json'</span> 
-H <span class="s1">'AccessToken: ZeroDeposit-1579175515000-7c474385a710551b5d2aaeca2268d6ea7e7721fc'</span> 
-d <span class="s1">'{
        "landlord": {
            "id": "landlordId20",
            "email": "test1@test.com",
            "lastname": "Landlord",
            "firstname": "Jack",
            "phone": "07401655677",
            "mobile": "06788987678",
            "birth_date": "1990-01-13",
            "salutation": "Mr.",
            "job_title": "CEO",
            "postcode": "EC3M5DJ",
            "street": "fenchurch",
            "city": "london",
            "country": "UK",
            "created_date": "2019-12-23T16:00:00Z"
        },
        "tenancy": {
            "end_date": "2019-12-23",
            "start_date": "2019-12-23",
            "deposit_amount": 2500.00,
            "country": "UK",
            "city": "London",
            "street": "Faringford Road",
            "postcode": "E15 4DG",
            "customer_id": "landlordId20",
            "reference": "1111333",
            "id": "tenancy68",
            "rent_amount": 10000.15,
            "nr_of_tenants": 3,
            "created_date": "2019-12-23T16:00:00Z"
        },
        "evidence": [
            {
                "file_url": "https://test/evidence1.txt",
                "uploader_type": "Landlord",
                "filename": "evidence1",
                "dispute_id": "dispute68",
                "dispute_item_id": "l26",
                "file_size": "500",
                "source": "Admin",
                "file_type": "txt",
                "id": "ev28",
                "created_date": "2019-12-23T16:00:00Z"
            },
            {
                "file_url": "https://test/evidence2.txt",
                "uploader_type": "Landlord",
                "filename": "evidence2",
                "dispute_id": "dispute68",
                "dispute_item_id": "l26",
                "file_size": "500",
                "source": "Admin",
                "file_type": "txt",
                "id": "ev29",
                "created_date": "2019-12-23T16:00:00Z"
            },
            {
                "file_url": "https://test/evidence3.txt",
                "uploader_type": "Landlord",
                "filename": "evidence3",
                "dispute_id": "dispute68",
                "dispute_item_id": "l26",
                "file_size": "500",
                "source": "Admin",
                "file_type": "txt",
                "id": "ev30",
                "created_date": "2019-12-23T16:00:00Z"
            }
        ],
        "tenant": [
            {
                "email": "test8@test8.com",
                "lastname": "Tenant",
                "firstname": "Lee",
                "id": "t8",
                "phone": "07899855677",
                "mobile": "07988766544",
                "birth_date": "1999-08-23",
                "salutation": "Mr.",
                "job_title": "Consultant",
                "created_date": "2019-12-23T16:00:00Z"
            },
            {
                "email": "test9@test9.com",
                "lastname": "Tenant",
                "firstname": "James",
                "id": "t9",
                "phone": "07899855677",
                "mobile": "07988766544",
                "birth_date": "1999-08-23",
                "salutation": "Mr.",
                "job_title": "Admin",
                "created_date": "2019-12-23T16:00:00Z"
            },
            {
                "email": "test10@test10.com",
                "lastname": "Tenant",
                "firstname": "Darren",
                "id": "t10",
                "phone": "07899855677",
                "mobile": "07988766544",
                "birth_date": "1999-08-23",
                "salutation": "Mr.",
                "job_title": "Consultant",
                "created_date": "2019-12-23T16:00:00Z"
            }
        ],
        "dispute_line": [
            {
                "claimed_landlord": 400.00,
                "type": "Rent",
                "dispute_id": "dispute68",
                "tenant_amount_agreed": 500.55,
                "landlord_statement": "late rent",
                "tenant_statement": "no money left",
                "id": "l26",
                "created_date": "2019-12-23T16:00:00Z"
            },
            {
                "claimed_landlord": 600.00,
                "type": "Damage",
                "dispute_id": "dispute68",
                "tenant_amount_agreed": 100.55,
                "landlord_statement": "damaged counter",
                "tenant_statement": "little damage",
                "id": "l27",
                "created_date": "2019-12-23T16:00:00Z"
            },
            {
                "claimed_landlord": 1000.00,
                "type": "Gardening",
                "dispute_id": "dispute68",
                "tenant_amount_agreed": 50.55,
                "landlord_statement": "damaged garden",
                "tenant_statement": "didnt do it",
                "id": "l28",
                "created_date": "2019-12-23T16:00:00Z"
            }
        ],
        "dispute": {
            "initiated_by": "Landlord",
            "tenancy_id": "tenancy68",
            "disputed_amount": 2000.00,
            "lead_landlord_id": "landlordId20",
            "lead_tenant_id": "t9",
            "total_claim_amount": 2000.00,
            "deposit_owner_id": "branch1",
            "agent_id": "agent20",
            "branch_id": "branch1",
            "dispute_reasons": "tenant left house in a mess",
            "dispute_steps": "tried to agree amount with tenant but didnt work",
            "id": "dispute68",
            "created_date": "2019-12-23T16:00:00Z"
        },
        "agent": {
            "id": "agent20",
            "branch_id": "branch1",
            "firstname": "Joe",
            "lastname": "Bloggs",
            "email": "joe@bloggs.com",
            "phone": "06789765444",
            "mobile": "07501655678",
            "birth_date": "1999-09-24",
            "salutation": "Mr.",
            "job_title": "CFO",
            "created_date": "2019-12-23T16:00:00Z"
        },
        "branch": {
            "id": "branch1",
            "name": "Foxtons Central",
            "postcode": "EC3M5DJ",
            "street": "fenchurch",
            "city": "london",
            "country": "UK",
            "website": "www.website.com",
            "phone": "090888788677",
            "created_date": "2019-12-23T16:00:00Z"
        }
    }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w">  </span><span class="mi">201</span><span class="w"> </span><span class="err">Created</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"tds_dispute_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5008E00000Gu5NsQAJ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An example of a dispute submission is shown through the shell script on the right side panel. Some definitions are 
explained below.</p>
<h3 id='http-method'>HTTP Method</h3>
<p><code>POST</code></p>
<h3 id='endpoint'>Endpoint</h3>
<p><code>https://uat-tds.cs87.force.com/services/apexrest/v1/disputes</code></p>
<h3 id='http-headers'>HTTP Headers</h3>
<table><thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Accept</td>
<td>application/json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
<tr>
<td>AccessToken</td>
<td>TestAccount-1578320284000-77667d19e566d4744ed0db55b734f63c5c7a5338</td>
</tr>
</tbody></table>
<h3 id='request-body'>Request Body</h3>
<p>See shell script example</p>

<p>Notes:</p>

<p><code>Date</code> fields should be sent in <code>YYYY-MM-DD</code> format.</p>

<p><code>Date/time</code> fields should be sent in UTC format like <code>YYYY-MM-DDTHH:mm:ssZ</code>.</p>

<p><code>Enum</code> type fields should have values inside the provided set or the payload will be rejected.</p>
<h3 id='response'>Response</h3>
<p>The response body will contain a JSON object with the parameters below.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>Boolean indicating whether submission was successful or not</td>
</tr>
<tr>
<td>errors</td>
<td>Displayed on failure will include specific message flagging the error(s)</td>
</tr>
<tr>
<td>tds_dispute_id</td>
<td>Displayed on success with internal ID for the created dispute</td>
</tr>
</tbody></table>
<h2 id='error-messages'>Error messages</h2>
<p>In case the submitted payload is not successful, the returned parameter <code>errors</code> can contain the any of the messages 
described below.</p>

<table><thead>
<tr>
<th>Message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content Type not supported</td>
<td>The Content-Type header value provided is not supported</td>
</tr>
<tr>
<td>Accept not supported</td>
<td>The Accept header value provided is not supported</td>
</tr>
<tr>
<td>No access token provided</td>
<td>AccessToken header not provided or blank value</td>
</tr>
<tr>
<td>Invalid access token format</td>
<td>AccessToken header value has wrong format</td>
</tr>
<tr>
<td>Invalid timestamp</td>
<td>Timestamp not provided or invalid</td>
</tr>
<tr>
<td>Timestamp is too old</td>
<td>Timestamp provided is older than 5 minutes</td>
</tr>
<tr>
<td>Invalid access token</td>
<td>Provided hmac can not be authenticated</td>
</tr>
<tr>
<td>Invalid payload</td>
<td>Payload provided is malformed</td>
</tr>
<tr>
<td>Missing required Objects</td>
<td>Required payload objects have not been provided</td>
</tr>
<tr>
<td>Invalid objects</td>
<td>Payload contains objects that are not part of the schema</td>
</tr>
<tr>
<td>Invalid type for objects</td>
<td>Payload contains objects that have the wrong type</td>
</tr>
<tr>
<td>Missing required parameters</td>
<td>Flags mandatory fields that are missing in dot notation &#39;object.field&#39;</td>
</tr>
<tr>
<td>List can not be empty</td>
<td>Payload contains an empty list for a mandatory object, there should always be at least 1 element</td>
</tr>
<tr>
<td>Invalid parameters for object</td>
<td>Payload contains invalid/non existent parameter(s) for the object specified</td>
</tr>
<tr>
<td>Invalid value for field</td>
<td>A value that is not within the allowed value set for that field has been provided</td>
</tr>
<tr>
<td>Invalid field type for key</td>
<td>A blank or null value has been provided for a mandatory key. Mandatory keys can not be blank</td>
</tr>
<tr>
<td>Duplicate {object} id found</td>
<td>A dispute, tenancy, dispute_line, or evidence has already been created with that id</td>
</tr>
<tr>
<td>Invalid foreign key for object</td>
<td>The object contains a foreign key reference to an object that is not on the payload</td>
</tr>
</tbody></table>
<h1 id='webhooks'>Webhooks</h1><h2 id='introduction-3'>Introduction</h2>
<p>TDS will communicate status updates and adjudication results via REST based webhooks, where suppliers will be able to 
subscribe and provide the callback endpoints. Subscriptions are done via request to TDS only, at this point.</p>

<p>Once TDS is provided with an endpoint for the callback for a specific webhook action, a subscription will be created and 
shared key will be provided to the supplier. There will always be a unique shared key per endpoint per subscription.</p>
<h2 id='headers'>Headers</h2>
<p>TDS webhook requests will always have three specific HTTP headers that will help suppliers verify the source, content
type and delivery unique identifier.</p>

<table><thead>
<tr>
<th>Header</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>String</td>
<td>Content type of the request, always application/json</td>
</tr>
<tr>
<td>TDS-Delivery</td>
<td>String</td>
<td>Unique identifier for the webhook event</td>
</tr>
<tr>
<td>TDS-Signature</td>
<td>String</td>
<td>TDS signature using shared key</td>
</tr>
</tbody></table>
<h2 id='verifying-the-source'>Verifying the source</h2>
<p>Suppliers will be able to verify the source of the webhook using <code>TDS-Signature</code> header.</p>

<p>This will contain the HMAC generated by a SHA1 hash of the payload, signed with the shared key provided by TDS for the
endpoint. Your generated hash should always match this signature for a valid authentication.</p>
<h2 id='dispute-status-update'>Dispute Status update</h2>
<p>The Dispute Status Update webhook allows suppliers to be notified whenever the status of a case changes.</p>

<p>The subscription is not mandatory. List of statuses are shown in the table below.</p>

<table><thead>
<tr>
<th>Status</th>
</tr>
</thead><tbody>
<tr>
<td>On Hold</td>
</tr>
<tr>
<td>Evidence Gathering TT</td>
</tr>
<tr>
<td>Awaiting Review</td>
</tr>
<tr>
<td>Review Complete</td>
</tr>
<tr>
<td>Adjudication</td>
</tr>
<tr>
<td>Closed</td>
</tr>
</tbody></table>
<h3 id='payload-schema'>Payload schema</h3><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s1">'https://disputesupplier.com/dispute_status_update'</span> 
-H <span class="s1">'Content-Type: application/json'</span> 
-H <span class="s1">'TDS-Delivery: 5008E00000GwTBjQAN1579786198991'</span> 
-H <span class="s1">'TDS-signature: 5b96954597082eade74430f075c819d27aa66c1e'</span>
-d <span class="s1">'{
      "status" : "Review Complete",
      "id" : "dispute71",
      "updated_datetime" : "2020-01-23T13:29:56Z"
    }'</span>
</code></pre>
<blockquote>
<p>Webhook should expected the following response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w">  </span><span class="mi">200</span><span class="w"> </span><span class="err">OK</span><span class="w">
</span></code></pre>
<p>Payload will be sent in JSON format and will contain the following schema.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>The primary key for the dispute on the source system</td>
</tr>
<tr>
<td>status</td>
<td>String(244)</td>
<td>The new status of the dispute</td>
</tr>
<tr>
<td>updated_datetime</td>
<td>Date/time</td>
<td>Datetime of the update</td>
</tr>
</tbody></table>

<p>Datetime will be provided in UTC time with format <code>YYYY-MM-DDTHH:mm:ssZ</code>.</p>

<p>Example request shown on the right side panel.</p>
<h2 id='adjudication-results'>Adjudication Results</h2>
<p>The Adjudication results webhook will be triggered off of the report being published by the adjudication team 
and will contain information about the decision on the dispute and amounts to be paid out.</p>

<p>This subscription is mandatory.</p>
<h3 id='payload-schema-2'>Payload schema</h3><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s1">'https://disputesupplier.com/adjudication_results'</span> 
-H <span class="s1">'Content-Type: application/json'</span> 
-H <span class="s1">'TDS-Delivery: a0C8E000006o4w5UAA1579785940763'</span> 
-H <span class="s1">'TDS-signature: 4d9c90e059ba262baf07a02f2258680390cee645'</span>
-d <span class="s1">'{
      "awarded_to_tenant" : 449.44,
      "report_url" : "https://shareuatna11.springcm.com/Public/DownloadPdf/12341/1a4351cc-0032-ea11-b80a-48df378a7098/299e1a2e-0132-ea11-b80a-48df378a7098",
      "created_date" : "2020-01-20T17:05:29Z",
      "dispute_id" : "dispute68",
      "publish_date" : "2020-01-23T00:00:00Z",
      "awarded_to_agent" : 100.00,
      "awarded_to_landlord" : 450.56
    }'</span>
</code></pre>
<blockquote>
<p>Webhook should expected the following response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w">  </span><span class="mi">200</span><span class="w"> </span><span class="err">OK</span><span class="w">
</span></code></pre>
<p>Payload will be sent in JSON format and will contain the following schema.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String(244)</td>
<td>TDS report unique identifier</td>
</tr>
<tr>
<td>dispute_id</td>
<td>String(244)</td>
<td>Dispute identifier of the source system</td>
</tr>
<tr>
<td>publish_date</td>
<td>Date/time</td>
<td>Date/time of when decision was published</td>
</tr>
<tr>
<td>awarded_to_tenant</td>
<td>Double(16,2)</td>
<td>Amount awarded to tenants</td>
</tr>
<tr>
<td>awarded_to_landlord</td>
<td>Double(16,2)</td>
<td>Amount awarded to landlord</td>
</tr>
<tr>
<td>awarded_to_agent</td>
<td>Double(16,2)</td>
<td>Amount awarded to agent</td>
</tr>
<tr>
<td>report_url</td>
<td>String(255)</td>
<td>Public url to TDS adjudication report in PDF format. Valid for 1 day</td>
</tr>
<tr>
<td>created_date</td>
<td>Date/time</td>
<td>Date/time of report creation</td>
</tr>
</tbody></table>

<p>Date/time will be provided in UTC time with format <code>YYYY-MM-DDTHH:mm:ssZ</code>.</p>

<p>Example request shown on the right side panel.</p>

<aside class="warning">
The public report link sent is valid for one day only.
</aside>
<h2 id='on-demand-webhook-triggering-staging-only'>On-demand webhook triggering (Staging only)</h2>
<p>TDS allows the supplier to trigger the webhooks themselves via API to help with testing your integration - this feature 
is only available in the staging environment.</p>

<p>Calling these endpoints will result in the corresponding webhook being triggered and will send the event to your
specified handler endpoints.</p>
<h3 id='authentication-2'>Authentication</h3>
<p>Authentication method is the same as the Disputes API, so you should be able to just reuse what you already have set up.</p>
<h3 id='triggering-a-dispute-status-update'>Triggering a Dispute Status Update</h3>
<p>Manually triggering a status update can be done using the specifications below.</p>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s1">'https://uat-tds.cs87.force.com/services/apexrest/webhooktrigger/v1/dispute_status_update'</span> 
-H <span class="s1">'Accept: application/json'</span>
-H <span class="s1">'Content-Type: application/json'</span> 
-H <span class="s1">'AccessToken: ZeroDeposit-1579175515000-7c474385a710551b5d2aaeca2268d6ea7e7721fc'</span> 
-d <span class="s1">'{
      "status" : "Review Complete",
      "tds_dispute_id" : "5008E00000HKEVe"
    }'</span>
</code></pre>
<blockquote>
<p>Response should be presented as below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w">  </span><span class="mi">200</span><span class="w"> </span><span class="err">OK</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Environment</th>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td>Staging</td>
<td>https://uat-tds.cs87.force.com/services/apexrest/webhooktrigger/v1/dispute_status_update</td>
</tr>
</tbody></table>

<p>### Request Headers</p>

<table><thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Accept</td>
<td>application/json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
<tr>
<td>AccessToken</td>
<td><token></td>
</tr>
</tbody></table>

<p><code>HTTP Method</code> - <code>POST</code></p>

<p>### Request Parameters</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tds_dispute_id</td>
<td>String</td>
<td>TDS&#39;s id of the dispute returned by API after creation</td>
</tr>
<tr>
<td>status</td>
<td>Enum</td>
<td>New status of the case to update to. Values are: On Hold Evidence Gathering TT, Awaiting Review, Review Complete, Adjudication, Closed</td>
</tr>
</tbody></table>

<p>### Response Body </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>Boolean indicating if update was successful or not</td>
</tr>
<tr>
<td>errors</td>
<td>Displayed on failure will include specific message flagging the error(s)</td>
</tr>
</tbody></table>

<p>See example request in the panel on the right.  </p>
<h3 id='triggering-an-adjudication-report-publishing'>Triggering an Adjudication Report publishing</h3>
<p>Manually triggering an Adjudication Report publishing can be done using the specifications below.</p>

<p>This will create a dummy adjudication report with the results and change the status to &#39;Published&#39;, that will trigger
the webhook.</p>

<aside class="warning">
The report results triggered this way will NOT include a report link, as this is a manual step that integrates with
the document generation engine.
</aside>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s1">'https://uat-tds.cs87.force.com/services/apexrest/webhooktrigger/v1/publish_report'</span> 
-H <span class="s1">'Accept: application/json'</span>
-H <span class="s1">'Content-Type: application/json'</span> 
-H <span class="s1">'AccessToken: ZeroDeposit-1579175515000-7c474385a710551b5d2aaeca2268d6ea7e7721fc'</span> 
-d <span class="s1">'{
     "tds_dispute_id" : "5008E00000HKEVe"
    }'</span>
</code></pre>
<blockquote>
<p>Response should be presented as below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w">  </span><span class="mi">200</span><span class="w"> </span><span class="err">OK</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Environment</th>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td>Staging</td>
<td>https://uat-tds.cs87.force.com/services/apexrest/webhooktrigger/v1/publish_report</td>
</tr>
</tbody></table>

<p>### Request Headers</p>

<table><thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Accept</td>
<td>application/json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
<tr>
<td>AccessToken</td>
<td><token></td>
</tr>
</tbody></table>

<p><code>HTTP Method</code> - <code>POST</code></p>

<p>### Request Parameters</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tds_dispute_id</td>
<td>String</td>
<td>TDS&#39;s id of the dispute returned by API after creation</td>
</tr>
</tbody></table>

<p>### Response Body </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>Boolean indicating if update was successful or not</td>
</tr>
<tr>
<td>errors</td>
<td>Displayed on failure will include specific message flagging the error(s)</td>
</tr>
</tbody></table>
<h1 id='contacts'>Contacts</h1>
<p>For any issue or query related to any of the functionality documented, please email the admin tiago.lopes@weare4c.com. </p>
<h1 id='errors'>Errors</h1>
<p>The Disputes API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your Access Token is invalid.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You have tried to submit a dispute using the wrong HTTP method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a response format that isn&#39;t JSON.</td>
</tr>
<tr>
<td>409</td>
<td>Conflict -- You have submitted a duplicate dispute, tenancy, dispute_line or evidence object.</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type -- You have submited a request in a format that is not JSON.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Contact the admin.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
